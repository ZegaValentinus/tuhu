<div class="dice-roll">
    <!--<div class="dice-flavor">Hello there !</div>-->
    <div class="dice-result">
        {{#if (eq compskillvalue "powerunleash")}}
            <div class="dice-formula tvq-dice-formula tvq-spellcardcolor-thought">
                {{localize "touhouvq.namesRaceSkill.powerunleash"}}
            </div>
        {{/if}}
        <div class="dice-formula tvq-dice-formula tvq-strength-color">
            {{localize "touhouvq.sheet.rollStrength"}}
        </div>
        <div class="dice-tooltip">
            <section class="tooltip-part">
                <div class="dice">
                    <header class="part-header flexrow">
                        <span class="part-formula">{{rollResult.formula}}</span>
                        {{#ifEquals rollResult.dice.[0].results.[0].result 20}}
                            <p class="tvq-criticalsuccess-display">
                                {{localize "touhouvq.critical.critsuccess"}}
                            </p>
                        {{else}}
                            {{#ifEquals rollResult.dice.[0].results.[0].result 1}}
                                <p class="tvq-criticalfailure-display">
                                    {{localize "touhouvq.critical.critfailure"}}
                                </p>
                            {{/ifEquals}}
                        {{/ifEquals}}
                        <span class="part-total">{{rollResult.total}}</span>
                    </header>
                    <ol class="dice-rolls">
                        {{#each rollResult.dice as |object key|}}
                            {{#each this.results}}
                                {{#ifSuperiorOrEquals this.result object.faces}}
                                    <li class="roll max die d{{object.faces}}">{{this.result}}</li>
                                {{else}}
                                    {{#ifEquals this.result 1}}
                                        <li class="roll min die d{{object.faces}}">{{this.result}}</li>
                                    {{else}}
                                        <li class="roll die d{{object.faces}}">{{this.result}}</li>
                                    {{/ifEquals}}
                                {{/ifSuperiorOrEquals}}
                            {{/each}}
                        {{/each}}
                    </ol>
                </div>
            </section>
        </div>
        <div class="tvq-dice-result">
            {{#ifEquals rollResult.dice.[0].results.[0].result 20}}
                <img class="tvq-taskcheck-img" src="systems/touhouvq/assets/img/d20success2_1.webp">
                <h4 class="tvq-taskcheck-resulttotal tvq-criticalsuccess">{{rollResult.total}}</h4>
            {{else}}
                {{#ifEquals rollResult.dice.[0].results.[0].result 1}}
                    <img class="tvq-taskcheck-img" src="systems/touhouvq/assets/img/d20fumble2_1.webp">
                    <h4 class="tvq-taskcheck-resulttotal tvq-criticalfailure">{{rollResult.total}}</h4>
                {{else}}
                    <img class="tvq-taskcheck-img" src="systems/touhouvq/assets/img/roll_1.webp">
                    <h4 class="tvq-taskcheck-resulttotal">{{rollResult.total}}</h4>
                {{/ifEquals}}
            {{/ifEquals}}
        </div>

        {{#if (eq compskillvalue "powerunleash")}}
            {{#ifSuperiorOrEquals rollResult.total 20}}
                <div class="raceskill-checkdiv">
                    <div class="checkdiv-1">
                        <p class="checkdiv-p1">{{localize "touhouvq.simpleMessage.diceDifficulty"}}</p>
                        <p class="checkdiv-p2">{{localize "touhouvq.difficulties.Arduous"}} ({{localize "touhouvq.difficulties.Arduous1"}})</p>
                    </div>
                    <div class="checkdiv-2 checkdiv-2-success">
                        <p>{{localize "touhouvq.simpleCheck.success"}}</p>
                    </div>
                </div>
            {{else}}
                <div class="raceskill-checkdiv">
                    <div class="checkdiv-1">
                        <p class="checkdiv-p1">{{localize "touhouvq.simpleMessage.diceDifficulty"}}</p>
                        <p class="checkdiv-p2">{{localize "touhouvq.difficulties.Arduous"}} ({{localize "touhouvq.difficulties.Arduous1"}})</p>
                    </div>
                    <div class="checkdiv-2 checkdiv-2-failure">
                        <p>{{localize "touhouvq.simpleCheck.failure"}}</p>
                    </div>
                </div>
            {{/ifSuperiorOrEquals}}
        {{/if}}

        <div class="tvq-frolic-buttons tvq-hide" data-actor="{{rollResult.data.data._id}}" data-type="1" data-score="{{rollResult._total}}" data-bigresult="{{rollResult.terms.[0].results.[0].result}}" data-skill="{{compskillvalue}}">
            {{#each rollResult.dice as |object key|}}
                {{#ifNotEquals this.faces 20}}
                    {{#each this.results}}
                        <button type="button" id="earthrabbit-raceskill-button" class="tvq-frolic-button" data-faces="{{object.faces}}" data-result="{{this.result}}">{{localize "touhouvq.flavorText.earthrabbitStolen2"}}{{object.faces}} ({{this.result}})</button>
                    {{/each}}
                {{/ifNotEquals}}
            {{/each}}
        </div>

    </div>
</div>